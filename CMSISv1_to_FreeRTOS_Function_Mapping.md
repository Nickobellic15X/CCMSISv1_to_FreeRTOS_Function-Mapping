# CMSIS v1 - RTOS Function Mapping

| CMSIS v1 Wrapper Function                                                                                                                       | FreeRTOS API equivalent                                                 | Notes & Remarks if any                                                                                                                                                                                                                                       |
|-------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [osKernelStart();](https://www.keil.com/pack/doc/cmsis/RTOS/html/group__CMSIS__RTOS__KernelCtrl.html#gaab668ffd2ea76bb0a77ab0ab385eaef2)        | vTaskStartScheduler();  <br><br>                                        | Takes no argument, used to hand over control to FreeRTOS kernel.                                                                                                                                                                                             |
| [osPoolCreate();](https://www.keil.com/pack/doc/cmsis/RTOS/html/group__CMSIS__RTOS__PoolMgmt.html#ga34af5c4f4ab38f4138ea7f1f9ece3a1a)           | pvPortMalloc();<br><br>                                                 | Used to create a dynamic memory block, to be used instead of malloc();                                                                                                                                                                                       |
| -                                                                                                                                               | pvPortFree();<br><br>                                                   | Used to free memory, called instead of free();                                                                                                                                                                                                               |
| -                                                                                                                                               | xPortGetFreeHeapSize();<br><br>                                         | Returns free bytes in the heap when function is called.                                                                                                                                                                                                      |
| -                                                                                                                                               | xPortGetMinimumEverFreeHeapSize();<br><br>                              | Returns the minimum number of unallocated bytes that have ever existed since FreeRTOS application started executing                                                                                                                                          |
| [osThreadTerminate();](https://www.keil.com/pack/doc/cmsis/RTOS/html/group__CMSIS__RTOS__ThreadMgmt.html#gaea135bb90eb853eff39e0800b91bbeab)    | vTaskDelete(); <br><br>                                                 | Used to delete a task                                                                                                                                                                                                                                        |
| [osThreadCreate();](https://www.keil.com/pack/doc/cmsis/RTOS/html/group__CMSIS__RTOS__ThreadMgmt.html#gac59b5713cb083702dce759c73fd90dff)<br><br> | xTaskCreate();<br><br>                                                  | xTaskCreate() is used to create a task (or thread). <br><br>Note: osThreadCreate() must be refereced to a Thread handle, and is used in conjuction with [osThreadDef()](https://www.keil.com/pack/doc/cmsis/RTOS/html/group__CMSIS__RTOS__ThreadMgmt.html#gaee93d929beb350f16e5cc7fa602e229f) |
| osThreadStaticDef();                                                                                                                            | [xTaskCreateStatic();](https://www.freertos.org/xTaskCreateStatic.html) | Same as above, but for cases where static allocation is required.                                                                                                                                                                                            |
| - <br><br>                                                                                                                                      | pdMS_TO_TICKS();                                                        | CMSIS v1 API calls takes delays in milliseconds unless stated otherwise, hence pdMS_TO_TICKS() is not a requirement. FreeRTOS API calls takes delays in Ticks and hence require conversion to milliseconds.                                                  |
| osDelay();                                                                                                                                      | vTaskDelay();                                                           | Delay function. CMSIS API call takes milliseconds whereas FreeRTOS API call takes time in ticks as delay.                                                                                                                                                    |
| osDelayUntil();                                                                                                                                 | vTaskDelayUntil();                                                      | Presicion delays (ref page 71 of Tutorial Guide for usage)<br>FreeRTOS API takes delay and previous wake time in ticks <br>CMSIS v1 Takes delay and prev wake time in milliseconds                                                                           |
| osThreadYield();                                                                                                                                | taskYIELD();                                                            | To request the scheduler to make a context switch.                                                                                                                                                                                                           |
| osThreadSuspend();                                                                                                                              | vTaskSuspend();                                                         | Takes threadID (or thead Handle) and suspends the thread.                                                                                                                                                                                                    |
| osThreadSuspendAll();                                                                                                                           | vTaskSuspendAll();                                                      | Suspends all running threads.                                                                                                                                                                                                                                |
| osThreadResume();                                                                                                                               | vTaskResume();                                                          | Resumes a suspended thread.                                                                                                                                                                                                                                  |
| osThreadResumeAll();                                                                                                                            | vTaskResumeAll();                                                       | Resumes all suspended threads.                                                                                                                                                                                                                               |
| osAbortDelay();                                                                                                                                 | [xTaskAbortDelay();](https://www.freertos.org/xTaskAbortDelay.html)     | Forces a task to leave the blocked state and enter the ready state.                                                                                                                                                                                          |
| [osThreadGetPriority();](https://www.keil.com/pack/doc/cmsis/RTOS/html/group__CMSIS__RTOS__ThreadMgmt.html#ga4299d838978bc2aae5e4350754e6a4e9)  | uxTaskPriorityGet();<br>uxTaskPriorityGetFomISR(); <--Interrupt safe version | Returns the Priority of the current task.                                                                                                                                                                                                                    |
| [osThreadSetPriority();](https://www.keil.com/pack/doc/cmsis/RTOS/html/group__CMSIS__RTOS__ThreadMgmt.html#ga4299d838978bc2aae5e4350754e6a4e9)  | vTaskPrioritySet();                                                     | Takes task handle as argument and new priority                                                                                                                                                                                                               |
| [osMessageCreate();](https://www.keil.com/pack/doc/cmsis/RTOS/html/group__CMSIS__RTOS__Message.html#gaf3b9345cf426304d46565152bc26fb78)         | xQueueCreate();                                                         | Creates a queue.<br>Note: osMessageCreate() must be assigned to a MessageQueueId (or Handle) and it;s used in conjuction with [osMessageQDef();](https://www.keil.com/pack/doc/cmsis/RTOS/html/group__CMSIS__RTOS__Message.html#gac9a6a6276c12609793e7701afcc82326)<br><br>More about [xQueueCreate();](https://www.freertos.org/a00116.html) |
| -                                                                                                                                               | xQueueCreateStatic();                                                   | Creates a queue, static allocation. [Reference](https://www.freertos.org/xQueueCreateStatic.html)                                                                                                                                                            |
| [osMessagePut();](https://www.keil.com/pack/doc/cmsis/RTOS/html/group__CMSIS__RTOS__Message.html#gac0dcf462fc92de8ffaba6cc004514a6d)            | xQueueSendToBack();<br>xQueueSendToBackFromISR();<br>                   | Sends the item to the end of the queue.<br><br>Note: Timeout must be 0 if you are using osMessagePut(); inside ISR.                                                                                                                                          |
| -                                                                                                                                               | xQueueSendToFront();<br>xQueueSendToFrontFromISR();                     | Sends the item to the front of the queue.                                                                                                                                                                                                                    |
| [osMessageGet();](https://www.keil.com/pack/doc/cmsis/RTOS/html/group__CMSIS__RTOS__Message.html#ga6c6892b8f2296cca6becd57ca2d7e1ae)            | xQueueReceive();<br>xQueueReceiveFromISR();                             | Reads the first element of the queue (head) and then removes the element from the queue.<br><br>Note:Timeout must be 0 if you are using osMessageGet(); inside ISR.                                                                                          |
| -                                                                                                                                               | xQueuePeek();<br>xQueuePeekFromISR();                                   | Same as xQueueReceive() with the exact same argument, but this function will not remove the item form the queue once it's been read.                                                                                                                         |
| osMessageWaiting();                                                                                                                             | uxQueueMessagesWaiting();<br>uxQueueMessagesWaitingFromISR();           | Returns the number of messages waiting in the queue.                                                                                                                                                                                                         |
| osMessageAvailableSpace();                                                                                                                      | uxQueueSpacesAvailable();                                               | Returns how many spaces empty spaces are left in the queue.                                                                                                                                                                                                  |
| osMessageDelete();                                                                                                                              | vQueueDelete();                                                         | Deletes the queue.                                                                                                                                                                                                                                           |
| -                                                                                                                                               | xQueueOverwrite();<br>xQueueOverwriteFromISR();                         | Should only be used with queues that have a length of one.  This function over writes the data present in the queue, if the length of the queue is greather than one. The function's implementation causes it to overwrite an arbritrary value in the queue.<br><br>This is used to implement mailbox in FreeRTOS. |
| [osTimerCreate();](https://www.keil.com/pack/doc/cmsis/RTOS/html/group__CMSIS__RTOS__TimerMgmt.html#gaedd312bfdca04e0b8162b666e09a1ae6)         | xTimerCreate();<br>xTimerCreateStatic();                                | Used to create a software timer.                                                                                                                                                                                                                             |
| [osTimerStart();](https://www.keil.com/pack/doc/cmsis/RTOS/html/group__CMSIS__RTOS__TimerMgmt.html#ga27a797a401b068e2644d1125f22a07ca)          | xTimerStart();<br>xTimerStartFromISR();                                 | Used to start the timer.<br>Note: osTimerStart(); can be called from an ISR, even thought the documentation mentions it cannot be.                                                                                                                           |
| [osTimerStop();](https://www.keil.com/pack/doc/cmsis/RTOS/html/group__CMSIS__RTOS__TimerMgmt.html#ga58f36b121a812936435cacc6e1e0e091)           | xTimerStop();<br>xTimerStopFromISR();                                   | To stop the software timer. osTimerStop(); can be called from ISR even though the documentation states it cannot be.                                                                                                                                         |
| [osTimerCreate();](https://www.keil.com/pack/doc/cmsis/RTOS/html/group__CMSIS__RTOS__TimerMgmt.html#gaedd312bfdca04e0b8162b666e09a1ae6)         | xTimerChangePeriod();<br>xTimerChangePeriodFromISR();                   | To change the period of the timer. Use the second parameter in osTimerStart(); to change the period                                                                                                                                                          |
| [osTimerCreate();](https://www.keil.com/pack/doc/cmsis/RTOS/html/group__CMSIS__RTOS__TimerMgmt.html#gaedd312bfdca04e0b8162b666e09a1ae6)         | xTimerReset();<br>xTimerResetFromISR();                                 | Calling osTimerStart(); when the timer is in the running state causes the timer to reset. Internally osTimerStart(); calls xTimemrChangePeriod();                                                                                                            |
| [osSemaphoreCreate();](https://www.keil.com/pack/doc/cmsis/RTOS/html/group__CMSIS__RTOS__SemaphoreMgmt.html#ga97381e8e55cd47cec390bf57c96d6edb) | xSemaphoreCreate();                                                     | To create a semaphore                                                                                                                                                                                                                                        |
| [osSemaphoreCreate();](https://www.keil.com/pack/doc/cmsis/RTOS/html/group__CMSIS__RTOS__SemaphoreMgmt.html#ga97381e8e55cd47cec390bf57c96d6edb) | xSemaphoreCreateCounting();                                             | In CMSIS Wrapper. Set count value to a positive number that is not 1. (Size limited between 30 and 65535)                                                                                                                                                    |
| [osSemaphoreWait();](https://www.keil.com/pack/doc/cmsis/RTOS/html/group__CMSIS__RTOS__SemaphoreMgmt.html#gacc15b0fc8ce1167fe43da33042e62098)   | xSemaphoreTake();<br>xSemaphoreTakeFromISR();<br>                       | Timout in FreeRTOS API functions as usual are given in Ticks.                                                                                                                                                                                                |
| [osSemaphoreRelease](https://www.keil.com/pack/doc/cmsis/RTOS/html/group__CMSIS__RTOS__SemaphoreMgmt.html#gab108914997c49e14d8ff1ae0d1988ca0)   | xSemaphoreGive();<br>xSemaphoreGiveFromISR();                           | Timout in FreeRTOS API functions as usual are given in Ticks.                                                                                                                                                                                                |

- - -
Documentation for Kiel CMSIS V1 and V2 Wrapper functions can be found [here](https://www.keil.com/pack/doc/cmsis/RTOS/html/index.html).